@page
@model WebApplication1.Pages.OurPages.AdminSletBookningModel
@{
}
<h1>Slet en bookning</h1>

@* Select date & school *@
@* <form method="post" asp-page-handler="Filter">
    <input type="date" asp-for="date" />
    <a asp-page="Booking"
       asp-route-startIntervalHours="@Model.StartIntervalHours Model.StartIntervalMinutes)" asp-route-startIntervalMinutes="@Model.StartIntervalHours Model.StartIntervalMinutes)"
       asp-route-endIntervalHours="@Model.StartIntervalHours Model.EndIntervalMinutes)" asp-route-endIntervalMinutes="@Model.EndIntervalHours Model.StartIntervalMinutes)">
        <input type="submit" value="Filtrer" />
    </a>
</form> *@
@* List all bookings *@

<table>
    <tr>
        <td>Alle bookinger</td>
    </tr>
    <tr>
        <td>Lokale id</td>
        <td>Tid fra</td>
        <td>Tid til</td>
        <td>Personens email</td>
    </tr>
    @foreach(var booking in Model.GetAllBookings())
    {
        string gruppeMedlemRolle = new WebApplication1.Services.BrugerService().Read(booking.Gruppemedlem).Rolle.RolleNavn;
        <tr>
            <td>@booking.LokaleId</td>
            <td>@(booking.TidFra / 60):@(@booking.TidFra % 60)</td>
            <td>@(booking.TidTil / 60):@(@booking.TidTil % 60)</td>
            <td>@booking.Gruppemedlem (@gruppeMedlemRolle)</td>
            <td>
                <form method="post" >
                    <input asp-page-handler="DeleteBooking" asp-route-bookingId="@booking.Id" type="submit" value="Slet">
                </form>
            </td>
        </tr>
    }
</table>